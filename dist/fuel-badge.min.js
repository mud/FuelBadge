/*! fuel-badge - v0.1.0 - 2013-12-25 */
var FuelBadge=window.FuelBadge||{};!function(a){var b=function(){return{getLetter:function(a){return 0===a.length?a=" ":1!==a.length&&(a=a[0]),a=a.toUpperCase(),"undefined"!=typeof b[a]?b[a]:b["default"]}," ":" \n \n \n \n \n",0:"***\n* *\n* *\n* *\n***\n",1:"** \n * \n * \n * \n***\n",2:"***\n  *\n***\n*  \n***\n",3:"***\n  *\n***\n  *\n***\n",4:"* *\n* *\n***\n  *\n  *\n",5:"***\n*  \n***\n  *\n***\n",6:"***\n*  \n***\n* *\n***\n",7:"***\n  *\n  *\n  *\n  *\n",8:"***\n* *\n***\n* *\n***\n",9:"***\n* *\n***\n  *\n***\n",A:" * \n* *\n***\n* *\n* *\n",B:"** \n* *\n***\n* *\n** \n",C:"***\n*  \n*  \n*  \n***\n",D:"** \n* *\n* *\n* *\n** \n",E:"***\n*  \n** \n*  \n***\n",F:"***\n*  \n** \n*  \n*  \n",G:" **\n*  \n* *\n* *\n **\n",H:"* *\n* *\n***\n* *\n* *\n",I:"***\n * \n * \n * \n***\n",J:"***\n * \n * \n * \n*  \n",K:"* *\n* *\n** \n* *\n* *\n",L:"*  \n*  \n*  \n*  \n***\n",M:"* *\n***\n***\n* *\n* *\n",N:"* *\n***\n* *\n* *\n* *\n",O:"***\n* *\n* *\n* *\n***\n",P:"***\n* *\n***\n*  \n*  \n",Q:"***\n* *\n* *\n** \n **\n",R:"** \n* *\n***\n* *\n* *\n",S:"***\n*  \n***\n  *\n***\n",T:"***\n * \n * \n * \n * \n",U:"* *\n* *\n* *\n* *\n***\n",V:"* *\n* *\n* *\n* *\n * \n",W:"* *\n* *\n***\n***\n* *\n",X:"* *\n* *\n * \n* *\n* *\n",Y:"* *\n* *\n * \n * \n * \n",Z:"***\n  *\n * \n*  \n***\n",":":" \n*\n \n*\n \n",PM:"*\n \n \n \n \n","default":"   \n   \n * \n   \n   \n"}}();a.FuelBadge.Letters=b}(window),function(a){var b=function(a,b,c,d){this.col=a,this.row=b,this.color=c,this.on=d};b.cellBlock=10,b.radius=2,b.clearColor="#111",b.prototype.setOn=function(a){this.on!==a&&(this.on=a)},b.prototype.render=function(a,c){var d=b.cellBlock/1.5;a.save(),this.on?(a.fillStyle=this.color,a.strokeStyle=this.color,a.shadowColor=this.color,a.shadowBlur=2*c,FuelBadge.Utils.drawRoundRect(a,((this.col+1)*b.cellBlock-d)*c,((this.row+1)*b.cellBlock-d)*c,2*b.radius*c,2*b.radius*c,1.1*b.radius*c,!0,!1)):a.clearRect(this.col*b.cellBlock,this.row*b.cellBlock,b.cellBlock,b.cellBlock),a.restore()},a.FuelBadge.Pixel=b}(window),function(a){var b=function(a,b,c,d){this.id=a,this.cols=b,this.rows=c,this.width=b*FuelBadge.Pixel.cellBlock,this.height=(c+2)*FuelBadge.Pixel.cellBlock,this.scale=d||1,this.$canvas=$("<canvas/>",{id:a,width:this.width,height:this.height}),this.$canvas[0].width=this.width,this.$canvas[0].height=this.height,this.pixels=[],this.ctx=this.$canvas[0].getContext("2d");var e=0,f=0;for(e=0;c>e;e++)for(f=0;b>f;f++)this.pixels.push(new FuelBadge.Pixel(f,e,"#fff",!1));var g=5.5,h=0;for(f=0;20>f;f++)h=g*(20-f)-20,this.pixels.push(new FuelBadge.Pixel(f,this.rows+1,"hsl("+h+",100%,50%)",!0))};b.prototype.turnOnColorBar=function(){for(var a=null,b=0;20>b;b++)a=this.getPixel(b,this.rows),a.on=!0},b.prototype.turnOffColorBar=function(){for(var a=null,b=0;20>b;b++)a=this.getPixel(b,this.rows),a.on=!1},b.prototype.setColorBarProgress=function(a){a>1&&(a=1),0>a&&(a=0),a=1-a;for(var b=Math.floor(a*this.cols),c=null,d=0;d<this.cols;d++)c=this.getPixel(d,this.rows),c.on=!1,c.render(this.ctx,this.scale);for(d=this.cols-1;d>=b;d--)c=this.getPixel(d,this.rows),c.on=!0,c.render(this.ctx,this.scale)},b.prototype.animateColorBar=function(){for(var b=0,c=this;1>=b;)a.setTimeout(function(a){return function(){c.setColorBarProgress(a)}}(b),300*b),b+=.05},b.prototype.append=function(a){var b=a.width()/2-this.width/2,c=a.height()/2-this.height/2;this.$container=a,this.$canvas.css({left:b+"px",top:c+"px"}),a.append(this.$canvas)},b.prototype.render=function(){for(var a=0,b=this.pixels.length;b>a;++a)this.pixels[a].render(this.ctx,this.scale)},b.prototype.turnOn=function(a,b,c){var d=this.pixels[a+b*this.cols];d.on&&c!==!0||(d.on=!0,d.render(this.ctx,this.scale))},b.prototype.turnOff=function(a,b){var c=this.pixels[a+b*this.cols];c.on&&(c.on=!1,c.render(this.ctx,this.scale))},b.prototype.drawString=function(a,b){if(this.clear(),a.length>0){for(var c=[],d=null,e=null,f=null,g=0;g<a.length;g++){d=FuelBadge.Letters.getLetter(a[g]),e=d.split("\n");for(var h=0;h<e.length;h++)if(""!==e[h])if(0===g)c[h]=e[h];else{if(f=c[h]+=" "+e[h],f.length>=this.cols)break;c[h]=f}}if(("undefined"==typeof b||"center"===b.toLowerCase())&&c[0].length<this.cols-1){for(var i=Math.floor((this.cols-c[0].length)/2),j="";j.length<=i;)j+=" ";for(g=0;g<c.length;g++)c[g]=j+c[g]}var k=c.join("\n");this.setPixels(k)}this.render()},b.prototype.getPixel=function(a,b){return this.pixels[a+b*this.cols]},b.prototype.setPixels=function(a){for(var b=a.split("\n"),c=null,d=null,e=null,f=0,g=b.length;g>f;++f){c=b[f];for(var h=0;h<c.length;h++)d=c[h],e=this.getPixel(h,f),e.on="*"===d?!0:!1}},b.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height);for(var a=null,b=100,c=0;b>c;++c)a=this.pixels[c],a.on&&(a.on=!1);this.turnOnColorBar()},b.prototype.drawGrid=function(){this.ctx.strokeStyle="green",this.ctx.save(),this.ctx.translate(.5,.5);for(var a=0;a<=this.rows;a++){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(0,a*FuelBadge.Pixel.cellBlock),this.ctx.lineTo(this.cols*FuelBadge.Pixel.cellBlock,a*FuelBadge.Pixel.cellBlock),this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.restore();for(var b=0;b<=this.cols;b++)this.ctx.save(),b===this.cols&&this.ctx.translate(-.5,0),this.ctx.beginPath(),this.ctx.moveTo(b*FuelBadge.Pixel.cellBlock,0),this.ctx.lineTo(b*FuelBadge.Pixel.cellBlock,a*FuelBadge.Pixel.cellBlock),this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.restore()}this.ctx.restore()},b.drawLetter=function(a,b,c){for(var d=0,e=0,f=null,g=0;g<b.length;g++)if(f=b[g],"\n"===f)e++,d=0;else{var h=a.pixels[d+c+e*a.cols];h.on="*"===f?!0:!1,d++}},a.FuelBadge.Screen=b}(window),function(a){var b=b||{};b.drawRoundRect=function(a,b,c,d,e,f,g,h){"undefined"==typeof g&&(g=!0),"undefined"==typeof h&&(h=!1),"undefined"==typeof f&&(f=3),a.save(),a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath(),h&&a.stroke(),g&&a.fill(),a.restore()},a.FuelBadge.Utils=b}(window);